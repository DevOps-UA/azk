{"version":3,"file":"index.js","sources":["../../../src/images/index.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","src/images/index.js","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/5"],"names":[],"mappings":"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","sourcesContent":["module.exports = function() {\n            $__placeholder__0\n          }.call($__placeholder__1);","var __moduleName = $__placeholder__0;","require($__placeholder__0)","import { async, defer, _, dynamic } from 'azk';\n\nvar default_tag = \"latest\";\n\ndynamic(this, {\n  DImage() {\n    return require('azk/docker').Image;\n  },\n\n  docker() {\n    return require('azk/docker').default;\n  }\n});\n\nexport class Image {\n  constructor(image) {\n    if (_.isString(image)) {\n      this.name = image;\n    } else {\n      this.repository = image.repository;\n      this.tag = image.tag || default_tag;\n    }\n  }\n\n  check() {\n    return defer((_resolve, _reject, notify) => {\n      notify({ type: \"action\", context: \"image\", action: \"check_image\" });\n      return docker.findImage(this.name);\n    });\n  }\n\n  pull(stdout) {\n    return async(this, function* (notify) {\n      var image = yield this.check();\n      if (image == null) {\n        notify({ type: \"action\", context: \"image\", action: \"pull_image\", data: this });\n        image = yield docker.pull(this.repository, this.tag, _.isObject(stdout) ? stdout : null);\n      }\n      return image;\n    });\n  }\n\n  set name(value) {\n    var image = DImage.parseRepositoryTag(value);\n    this.repository = image.repository;\n    this.tag = image.tag || default_tag;\n  }\n\n  get name() {\n    return `${this.repository}:${this.tag}`;\n  }\n}\n","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","$ctx.returnValue = $__placeholder__0","return $ctx.end()","return $__placeholder__0","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","typeof global !== 'undefined' ? global : this"]}