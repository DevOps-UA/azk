{"version":3,"file":"index.js","sources":["../../../src/images/index.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"AAAA;ACAI,CAAJ,EAAI,CAAA,YAAY,qBAAoB,CAAC;UCArC,CAAA,OAAO,CFAyB,KAAK,CEAX;;;;UAA1B,CAAA,OAAO,CFC2C,YAAY,CEDpC;CFCjB,SAAe;CAAE,SAAiB;AAEvC,CAAJ,EAAI,CAAA,WAAW,EAAG,SAAQ,CAAC;AGHvB,CAAJ,EAAI,QHKG,SAAM,MAAK,CACJ,KAAK,CAAE;CACjB,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAE;AACrB,CAAA,OAAI,KAAK,EAAG,MAAK,CAAC;GACnB,KAAM;AACL,CAAA,OAAI,WAAW,EAAG,CAAA,KAAK,WAAW,CAAC;AACnC,CAAA,OAAI,IAAI,EAAG,CAAA,KAAK,IAAI,GAAI,YAAW,CAAC;GACrC;CGZoC,AHYpC,AACF,CGbsC;ACAzC,CAAA,AAAC,eAAe,YAAY,CAAC;CJe3B,MAAK,CAAL,UAAM;;CACJ,SAAO,CAAA,KAAK,WAAE,QAAQ,CAAE,CAAA,OAAO,CAAE,CAAA,MAAM,CAAK;AAC1C,CAAA,WAAM,CAAC;AAAE,CAAA,WAAI,CAAE,SAAQ;AAAE,CAAA,cAAO,CAAE,QAAO;AAAE,CAAA,aAAM,CAAE,cAAa;CAAA,MAAE,CAAC,CAAC;CACpE,WAAO,CAAA,MAAM,UAAU,CAAC,SAAS,CAAC,CAAC;KACpC,EAAC,CAAC;GACJ;CAED,KAAI,CAAJ,UAAK,MAAM;CACT,SAAO,CAAA,KAAK,CAAC,IAAI,WAAa,MAAM;;CKvBxC,WAAO,CCAP,eAAe,cDAS,ACAK,CCA7B,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;;CCDjB,mBRwBwB,CAAA,IAAI,MAAM,EAAE,CQxBZ;;qBCAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,iBAAI,MAAM,EAAG,CAAA,CVyBH,KAAK,GAAI,KAAI,CUzBS,QAAwC,CAAC;CACjE,mBAAK;;AVyBL,CAAA,mBAAM,CAAC;AAAE,CAAA,mBAAI,CAAE,SAAQ;AAAE,CAAA,sBAAO,CAAE,QAAO;AAAE,CAAA,qBAAM,CAAE,aAAY;AAAE,CAAA,mBAAI,CAAE,KAAI;CAAA,cAAE,CAAC,CAAC;;;;;CQ1BvF,mBR2BsB,CAAA,MAAM,KAAK,CAAC,IAAI,WAAW,CAAE,CAAA,IAAI,IAAI,CAAE,CAAA,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA,CAAG,OAAM,EAAG,KAAI,CAAC,CQ3BxE;;AR2BhB,CAAA,kBAAK,ES3Bb,CAAA,IAAI,KAAK,AT2BuF,CAAA;;;;AW3BhG,CAAA,iBAAI,YAAY,EX6BH,MW7BuB,AX6BlB,CW7BkB;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CLCmB,MAC/B,CFAO,KAAI,CAAC,CAAC;ML4BZ,CAAC;GACJ;CAED,IAAI,KAAI,CAAC,KAAK,CAAE;AACV,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,MAAM,mBAAmB,CAAC,KAAK,CAAC,CAAC;AAC7C,CAAA,OAAI,WAAW,EAAG,CAAA,KAAK,WAAW,CAAC;AACnC,CAAA,OAAI,IAAI,EAAG,CAAA,KAAK,IAAI,GAAI,YAAW,CAAC;GACrC;CAED,IAAI,KAAI,EAAG;CACT,WAAU,IAAI,WAAW,EAAA,IAAI,EAAA,CAAA,IAAI,IAAI,EAAG;GACzC;CAAA,KIzCmF;ASAtF,CAAA,KAAM,QAAQ;CCAd,YAAwB;CAAE,gBAAyB;GAAE;ACArD,CAAA,WAAU,CAAE,KAAI;CAAA,AFAkB,CAAC;Cb2CnC","sourcesContent":["import { async, defer, _ } from 'azk';\nimport { Image as DImage, default as docker} from 'azk/docker';\n\nvar default_tag = \"latest\";\n\nexport class Image {\n  constructor(image) {\n    if (_.isString(image)) {\n      this.name = image;\n    } else {\n      this.repository = image.repository;\n      this.tag = image.tag || default_tag;\n    }\n  }\n\n  check() {\n    return defer((_resolve, _reject, notify) => {\n      notify({ type: \"action\", context: \"image\", action: \"check_image\" });\n      return docker.findImage(this.name);\n    });\n  }\n\n  pull(stdout) {\n    return async(this, function* (notify) {\n      var image = yield this.check();\n      if (image == null) {\n        notify({ type: \"action\", context: \"image\", action: \"pull_image\", data: this });\n        image = yield docker.pull(this.repository, this.tag, _.isObject(stdout) ? stdout : null);\n      }\n      return image;\n    });\n  }\n\n  set name(value) {\n    var image = DImage.parseRepositoryTag(value);\n    this.repository = image.repository;\n    this.tag = image.tag || default_tag;\n  }\n\n  get name() {\n    return `${this.repository}:${this.tag}`;\n  }\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","$ctx.returnValue = $__placeholder__0","return $ctx.end()","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}