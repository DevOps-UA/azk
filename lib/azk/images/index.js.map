{"version":3,"file":"index.js","sources":["../../../src/images/index.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"AAAA;ACAI,CAAJ,EAAI,CAAA,YAAY,qBAAoB,CAAC;UCArC,CAAA,OAAO,CFAkB,KAAK,CEAJ;;;UAA1B,CAAA,OAAO,CFC2C,YAAY,CEDpC;CFCjB,SAAe;CAAE,SAAiB;AAEvC,CAAJ,EAAI,CAAA,WAAW,EAAG,SAAQ,CAAC;AGHvB,CAAJ,EAAI,QHKG,SAAM,MAAK,CACJ,KAAK,CAAE;CACjB,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAE;AACrB,CAAA,OAAI,KAAK,EAAG,MAAK,CAAC;GACnB,KAAM;AACL,CAAA,OAAI,WAAW,EAAG,CAAA,KAAK,WAAW,CAAC;AACnC,CAAA,OAAI,IAAI,EAAG,CAAA,KAAK,IAAI,GAAI,YAAW,CAAC;GACrC;CGZoC,AHYpC,AACF,CGbsC;ACAzC,CAAA,AAAC,eAAe,YAAY,CAAC;CJe3B,MAAK,CAAL,UAAM,CAAE;CACN,SAAO,CAAA,MAAM,UAAU,CAAC,IAAI,KAAK,CAAC,CAAC;GACpC;CAED,KAAI,CAAJ,UAAK,MAAM;AACL,CAAJ,MAAI,CAAA,IAAI,EAAG,KAAI,CAAC;CAChB,SAAO,CAAA,KAAK,UAAY;;CKrB5B,WAAO,CCAP,eAAe,cDAS,ACAK,CCA7B,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;;CCDjB,mBRsBwB,CAAA,IAAI,MAAM,EAAE,CQtBZ;;qBCAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,iBAAI,MAAM,EAAG,CAAA,CVuBH,KAAK,GAAI,KAAI,CUvBS,QAAwC,CAAC;CACjE,mBAAK;;;CFDb,mBRwBc,CAAA,MAAM,KAAK,CAAC,IAAI,WAAW,CAAE,CAAA,IAAI,IAAI,CAAE,CAAA,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA,CAAG,OAAM,EAAG,KAAI,CAAC,CQxBhE;;AGAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;ACAjB,CAAA,iBAAI,YAAY,EZ0BH,MY1BuB,AZ0BlB,CY1BkB;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CNCmB,MAC/B,CFAO,KAAI,CAAC,CAAC;MLyBZ,CAAC;GACJ;CAED,IAAI,KAAI,CAAC,KAAK,CAAE;AACV,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,MAAM,mBAAmB,CAAC,KAAK,CAAC,CAAC;AAC7C,CAAA,OAAI,WAAW,EAAG,CAAA,KAAK,WAAW,CAAC;AACnC,CAAA,OAAI,IAAI,EAAG,CAAA,KAAK,IAAI,GAAI,YAAW,CAAC;GACrC;CAED,IAAI,KAAI,EAAG;CACT,WAAU,IAAI,WAAW,EAAA,IAAI,EAAA,CAAA,IAAI,IAAI,EAAG;GACzC;CAAA,KItCmF;AUAtF,CAAA,KAAM,QAAQ;CCAd,YAAwB;CAAE,gBAAyB;GAAE;ACArD,CAAA,WAAU,CAAE,KAAI;CAAA,AFAkB,CAAC;CdwCnC","sourcesContent":["import { async, _ } from 'azk';\nimport { Image as DImage, default as docker} from 'azk/docker';\n\nvar default_tag = \"latest\";\n\nexport class Image {\n  constructor(image) {\n    if (_.isString(image)) {\n      this.name = image;\n    } else {\n      this.repository = image.repository;\n      this.tag = image.tag || default_tag;\n    }\n  }\n\n  check() {\n    return docker.findImage(this.name);\n  }\n\n  pull(stdout) {\n    var self = this;\n    return async(function* () {\n      var image = yield self.check();\n      if (image == null) {\n        yield docker.pull(self.repository, self.tag, _.isObject(stdout) ? stdout : null);\n      }\n      return image;\n    });\n  }\n\n  set name(value) {\n    var image = DImage.parseRepositoryTag(value);\n    this.repository = image.repository;\n    this.tag = image.tag || default_tag;\n  }\n\n  get name() {\n    return `${this.repository}:${this.tag}`;\n  }\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","$ctx.maybeThrow()","$ctx.returnValue = $__placeholder__0","return $ctx.end()","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}