{"version":3,"file":"ui.js","sources":["../../../src/cli/ui.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, t } from 'azk';\nimport { Multibar } from 'azk/cli/multi_bars';\nrequire('colors');\n\nvar execSh = require('exec-sh');\nvar Table  = require('cli-table');\nvar printf = require('printf');\nvar ok     = 'azk'.green;\nvar fail   = 'azk'.red;\nvar mbars  = [];\nvar tables = {};\n\nvar UI = {\n  isUI: true,\n\n  dir(...args) {\n    console.dir(...args);\n  },\n\n  output(string, ...args) {\n    this.stdout().write(printf(string || \"\", ...args) + \"\\n\");\n  },\n\n  tOutput(...args) {\n    this.stdout().write(t(...args) + \"\\n\");\n  },\n\n  outputWithLabel(rows, ident = '') {\n    rows = _.map(rows, (row) => {\n      return _.isArray(row) ? row : row.split('\\t');\n    });\n\n    var size = _.reduce(rows, (acc, row) => {\n      return acc > row[0].length ? acc : row[0].length;\n    }, 0);\n\n    _.each(rows, (row) => {\n      this.output(\"%s%-*s  %s\", ident, row.shift(), size, ...row);\n    });\n  },\n\n  ok(...args) {\n    this.output(ok + \": \" + t(...args));\n  },\n\n  fail(...args) {\n    this.output(fail + \": \" + t(...args));\n  },\n\n  // TOOD: Flush log (https://github.com/flatiron/winston/issues/228)\n  exit(code = 0) {\n    setTimeout(() => {\n      process.emit(\"azk:command:exit\", code);\n    }, 500);\n  },\n\n  newMultiBars() {\n    mbars.push(new Multibar());\n    return mbars.length - 1;\n  },\n\n  newBar(mbar, ...args) {\n    return mbars[mbar].newBar(...args);\n  },\n\n  stdout() {\n    return process.stdout;\n  },\n\n  stderr() {\n    return process.stderr;\n  },\n\n  stdin() {\n    return process.stdin;\n  },\n\n  table_add(name, options) {\n    tables[name] = new Table(options);\n    return name;\n  },\n\n  table_push(name, ...args) {\n    tables[name].push(...args);\n  },\n\n  table_show(name) {\n    this.output(tables[name].toString());\n  },\n\n  execSh(...args) {\n    execSh(...args);\n  }\n}\n\nexport { UI };\n\nexport class UIProxy {\n  constructor(ui) {\n    if (ui.isUI) {\n      this.__user_interface = ui;\n    } else {\n      this.parent = ui;\n    }\n  }\n\n  // Outputs and debugs\n  get userInterface() {\n    return this.parent ? this.parent.userInterface : this.__user_interface;\n  }\n}\n\n_.each(_.methods(UI), (method) => {\n  UIProxy.prototype[method] = function(...args) {\n    return this.userInterface[method](...args);\n  }\n});\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.toObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","$traceurRuntime.spread($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}