{"version":3,"file":"ui.js","sources":["../../../src/cli/ui.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, t } from 'azk';\nimport { Multibar } from 'azk/cli/multi_bars';\nrequire('colors');\n\nvar execSh  = require('exec-sh');\nvar Table   = require('cli-table');\nvar printf  = require('printf');\nvar ok      = 'azk'.green;\nvar fail    = 'azk'.red;\nvar warning = 'azk'.yellow;\nvar mbars   = [];\nvar tables  = {};\n\nvar UI = {\n  isUI: true,\n\n  dir(...args) {\n    console.dir(...args);\n  },\n\n  output(string, ...args) {\n    this.stdout().write(printf(string || \"\", ...args) + \"\\n\");\n  },\n\n  tOutput(...args) {\n    this.stdout().write(t(...args) + \"\\n\");\n  },\n\n  outputWithLabel(rows, ident = '') {\n    rows = _.map(rows, (row) => {\n      return _.isArray(row) ? row : row.split('\\t');\n    });\n\n    var size = _.reduce(rows, (acc, row) => {\n      return acc > row[0].length ? acc : row[0].length;\n    }, 0);\n\n    _.each(rows, (row) => {\n      this.output(\"%s%-*s  %s\", ident, row.shift(), size, ...row);\n    });\n  },\n\n  ok(...args) {\n    this.output(ok + \": \" + t(...args));\n  },\n\n  fail(...args) {\n    this.output(fail + \": \" + t(...args));\n  },\n\n  warning(...args) {\n    this.output(warning + \": \" + t(...args));\n  },\n\n  // TOOD: Flush log (https://github.com/flatiron/winston/issues/228)\n  exit(code = 0) {\n    setTimeout(() => {\n      process.emit(\"azk:command:exit\", code);\n    }, 500);\n  },\n\n  newMultiBars() {\n    mbars.push(new Multibar());\n    return mbars.length - 1;\n  },\n\n  newBar(mbar, ...args) {\n    return mbars[mbar].newBar(...args);\n  },\n\n  stdout() {\n    return process.stdout;\n  },\n\n  stderr() {\n    return process.stderr;\n  },\n\n  stdin() {\n    return process.stdin;\n  },\n\n  table_add(name, options) {\n    tables[name] = new Table(options);\n    return name;\n  },\n\n  table_push(name, ...args) {\n    tables[name].push(...args);\n  },\n\n  table_show(name) {\n    this.output(tables[name].toString());\n  },\n\n  execSh(...args) {\n    execSh(...args);\n  }\n}\n\nexport { UI };\n\nexport class UIProxy {\n  constructor(ui) {\n    if (ui.isUI) {\n      this.__user_interface = ui;\n    } else {\n      this.parent = ui;\n    }\n  }\n\n  set userInterface(ui) {\n    this.__user_interface = ui;\n  }\n\n  // Outputs and debugs\n  get userInterface() {\n    return this.parent ? this.parent.userInterface : this.__user_interface;\n  }\n}\n\n_.each(_.methods(UI), (method) => {\n  UIProxy.prototype[method] = function(...args) {\n    return this.userInterface[method](...args);\n  }\n});\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.toObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","$traceurRuntime.spread($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}