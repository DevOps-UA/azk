{"version":3,"file":"ui.js","sources":["../../../src/cli/ui.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, Q, t, defer } from 'azk';\nimport { Multibar } from 'azk/cli/multi_bars';\n\nrequire('colors');\n\nvar execSh   = require('exec-sh');\nvar Table    = require('cli-table');\nvar printf   = require('printf');\nvar inquirer = require('inquirer');\nvar mbars    = [];\nvar tables   = {};\n\n// Status labels\nvar ok       = 'azk'.green;\nvar fail     = 'azk'.red;\nvar warning  = 'azk'.yellow;\nvar info     = 'azk'.blue;\n\nvar UI = {\n  isUI: true,\n  t: t,\n\n  dir(...args) {\n    console.dir(...args);\n  },\n\n  output(string, ...args) {\n    this.stdout().write(printf(string || \"\", ...args) + \"\\n\");\n  },\n\n  tOutput(...args) {\n    this.stdout().write(t(...args) + \"\\n\");\n  },\n\n  outputWithLabel(rows, ident = '') {\n    rows = _.map(rows, (row) => {\n      return _.isArray(row) ? row : row.split('\\t');\n    });\n\n    var size = _.reduce(rows, (acc, row) => {\n      return acc > row[0].length ? acc : row[0].length;\n    }, 0);\n\n    _.each(rows, (row) => {\n      this.output(\"%s%-*s  %s\", ident, row.shift(), size, ...row);\n    });\n  },\n\n  // Helpers to print status\n  ok(...args)      { this._status(ok, ...args);      },\n  info(...args)    { this._status(info, ...args);    },\n  fail(...args)    { this._status(fail, ...args);    },\n  warning(...args) { this._status(warning, ...args); },\n  _status(tag, ...args) {\n    var string = t(...args).replace(/^(.+)/gm, `${tag}: $1`);\n    this.stderr().write(string + \"\\n\");\n  },\n\n  // TOOD: Flush log (https://github.com/flatiron/winston/issues/228)\n  exit(code = 0) {\n    setTimeout(() => {\n      process.emit(\"azk:command:exit\", code);\n    }, 500);\n  },\n\n  newMultiBars() {\n    mbars.push(new Multibar());\n    return mbars.length - 1;\n  },\n\n  newBar(mbar, ...args) {\n    return mbars[mbar].newBar(...args);\n  },\n\n  stdout() {\n    return process.stdout;\n  },\n\n  stderr() {\n    return process.stderr;\n  },\n\n  stdin() {\n    return process.stdin;\n  },\n\n  table_add(name, options) {\n    tables[name] = new Table(options);\n    return name;\n  },\n\n  table_push(name, ...args) {\n    tables[name].push(...args);\n  },\n\n  table_show(name) {\n    this.output(tables[name].toString());\n  },\n\n  // User interactions methods\n  execSh(...args) {\n    var result = (err) => { return (err) ? err.code : 0; }\n    return Q.nfcall(execSh, ...args).spread(result, result);\n  },\n\n  prompt(questions) {\n    // Object or array support\n    if (_.isObject(questions)) questions = [questions];\n\n    questions = _.map(questions, (q) => {\n      if (!_.isEmpty(q.message)) {\n        q.message = t(q.message);\n      }\n      return q;\n    });\n\n    return defer((resolve) => {\n      inquirer.prompt(questions, (answers) => resolve(answers));\n    });\n  }\n}\n\nexport { UI };\n\nexport class UIProxy {\n  constructor(ui) {\n    if (ui.isUI) {\n      this.__user_interface = ui;\n    } else {\n      this.parent = ui;\n    }\n  }\n\n  set userInterface(ui) {\n    this.__user_interface = ui;\n  }\n\n  // Outputs and debugs\n  get userInterface() {\n    return this.parent ? this.parent.userInterface : this.__user_interface;\n  }\n}\n\n_.each(_.methods(UI), (method) => {\n  UIProxy.prototype[method] = function(...args) {\n    return this.userInterface[method](...args);\n  }\n});\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.toObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","$traceurRuntime.spread($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}