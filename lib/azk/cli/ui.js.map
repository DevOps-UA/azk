{"version":3,"file":"ui.js","sources":["../../../src/cli/ui.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, t } from 'azk';\nimport { Multibar } from 'azk/cli/multi_bars';\nrequire('colors');\n\nvar printf = require('printf');\nvar ok     = 'azk'.green;\nvar fail   = 'azk'.red;\nvar mbars  = [];\n\nvar UI = {\n  isUI: true,\n\n  dir(...args) {\n    console.dir(...args);\n  },\n\n  output(string, ...args) {\n    this.stdout().write(printf(string || \"\", ...args) + \"\\n\");\n  },\n\n  tOutput(...args) {\n    this.stdout().write(t(...args) + \"\\n\");\n  },\n\n  outputWithLabel(rows, ident = '') {\n    rows = _.map(rows, (row) => {\n      return _.isArray(row) ? row : row.split('\\t');\n    });\n\n    var size = _.reduce(rows, (acc, row) => {\n      return acc > row[0].length ? acc : row[0].length;\n    }, 0);\n\n    _.each(rows, (row) => {\n      this.output(\"%s%-*s  %s\", ident, row.shift(), size, ...row);\n    });\n  },\n\n  ok(...args) {\n    console.log(ok + \": \" + t(...args));\n  },\n\n  fail(...args) {\n    console.log(fail + \": \" + t(...args));\n  },\n\n  // TOOD: Flush log (https://github.com/flatiron/winston/issues/228)\n  exit(code = 0) {\n    setTimeout(() => {\n      process.emit(\"azk:command:exit\", code);\n    }, 500);\n  },\n\n  newMultiBars() {\n    mbars.push(new Multibar());\n    return mbars.length - 1;\n  },\n\n  newBar(mbar, ...args) {\n    return mbars[mbar].newBar(...args);\n  },\n\n  stdout() {\n    return process.stdout;\n  },\n\n  stderr() {\n    return process.stderr;\n  },\n\n  stdin() {\n    return process.stdin;\n  },\n}\n\nexport { UI };\n\nexport class UIProxy {\n  constructor(ui) {\n    if (ui.isUI) {\n      this.__user_interface = ui;\n    } else {\n      this.parent = ui;\n    }\n  }\n\n  // Outputs and debugs\n  get userInterface() {\n    return this.parent ? this.parent.userInterface : this.__user_interface;\n  }\n}\n\n_.each(_.methods(UI), (method) => {\n  UIProxy.prototype[method] = function(...args) {\n    return this.userInterface[method](...args);\n  }\n});\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.toObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","$traceurRuntime.spread($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}