{"version":3,"file":"multi_bars.js","sources":["../../../src/cli/multi_bars.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["var ProgressBar = require('progress');\n\n// TODO: Implement tests\nexport class Multibar {\n  constructor(stream = process.stderr) {\n    this.stream     = stream || process.stderr;\n    this.cursor     = 0;\n    this.bars       = [];\n    this.terminates = 0;\n  }\n\n  newBar(schema, options = {}) {\n    options.stream = this.stream;\n    var bar   = new ProgressBar(schema, options);\n    var index = this.bars.length;\n    this.bars.push(bar);\n\n    // alloc line\n    this.move(index);\n    this.stream.write('\\n');\n    this.cursor ++;\n\n    // replace original\n    bar.otick = bar.tick;\n    bar.tick  = (...args) => this.tick(index, ...args);\n    bar.terminate = (message) => {\n      this.terminates++;\n      if (message) {\n        this.clear(index);\n        this.stream.write(message);\n      }\n      if (this.terminates == this.bars.length) {\n        this.terminate();\n      }\n    }\n\n    return bar;\n  }\n\n  clear(index) {\n    if (!this.stream.isTTY) return;\n    this.move(index);\n    this.stream.clearLine();\n    this.stream.cursorTo(0);\n  }\n\n  terminate() {\n    this.clear(this.bars.length);\n  }\n\n  move(index) {\n    if (!this.stream.isTTY) return;\n    this.stream.moveCursor(0, index - this.cursor);\n    this.cursor = index;\n  }\n\n  tick(index, value, options) {\n    var bar = this.bars[index];\n    if (bar) {\n      this.move(index);\n      bar.otick(value, options);\n    }\n  }\n}\n\n","var __moduleName = $__placeholder__0;","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.spread($__placeholder__0)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}