{"version":3,"file":"command.js","sources":["../../../src/cli/command.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, t } from 'azk';\nimport { InvalidOptionError, RequiredOptionError, InvalidValueError } from 'azk/utils/errors';\nimport { Option } from 'azk/cli/option';\nimport { UIProxy, UI } from 'azk/cli/ui';\nimport { Helpers } from 'azk/cli/helpers';\n\nvar printf = require('printf');\n\nexport { Option, UI, Helpers };\nexport class Command extends UIProxy {\n  constructor(name, user_interface) {\n    this.stackable = [];\n    this.commands  = {};\n    this.options   = {};\n    this.name      = this.__parse_name(name);\n    this.__cwd     = null;\n    this.examples  = [];\n\n    // Parent or interface\n    super(user_interface);\n    if (this.parent) {\n      this.parent.initChildren(this);\n    }\n  }\n\n  get cwd() {\n    return (this.parent) ? this.parent.cwd : this.__cwd;\n  }\n\n  set cwd(value) {\n    this.__cwd = value;\n  }\n\n  initChildren(parent) { }\n\n  __parse_name(name) {\n    var names = name.split(' ');\n    name = names.shift();\n\n    _.each(names, (option) => {\n      this.stackable.push(new Option({\n        type     : String,\n        stop     : option.match(/^[\\[|\\{]\\*.*[\\]|\\}]$/) ? true : false,\n        name     : option.replace(/^[\\[|\\{]\\*?(.*)[\\]|\\}]$/, \"$1\"),\n        required : option.match(/^\\{.*\\}$/) ? true : false,\n      }));\n    });\n\n    return name;\n  }\n\n  addExamples(examples) {\n    this.examples = this.examples.concat(examples);\n  }\n\n  addOption(alias, options = {}) {\n    alias = _.isArray(alias) ? alias : [alias];\n    alias = _.map(alias, (alias) => alias.replace(/^-*/, ''));\n    options.alias = alias;\n    options.name  = _.first(alias);\n\n    var option = new Option(options);\n    _.each(alias, (name) => this.options[name] = option);\n\n    return this;\n  }\n\n  setOptions(name, options = {}) {\n    var option = _.find(this.stackable, (opt) => opt.name == name);\n    if (!option) {\n      option = this.options[name];\n    }\n\n    if (option) {\n      _.each(options, (value, key) => option[key] = value);\n    }\n\n    return this;\n  }\n\n  // Parse and execute\n  fix_args(args) {\n    return _.reduce(args, (memo, arg) => {\n      // Split simple args (-afx => -a -f -x)\n      if (arg.match(/^-[^-]/)) {\n        var args = _.map(arg.slice(1).split(''), (a) => { return `-${a}` });\n        memo = memo.concat(args);\n\n      // No options (--no-debug => --debug false )\n      } else if (arg.match(/^-{2,}no-/)) {\n        arg  = arg.replace(/^-{2,}no-/, '');\n        memo = memo.concat([`--${arg}`, 'false']);\n\n      // Key value option ( --debug=false )\n      } else if (arg.match(/^-{2,}.*=.*$/)) {\n        memo = memo.concat(arg.split('='));\n      } else {\n        memo.push(arg)\n      }\n      return memo;\n    }, []);\n  }\n\n  invalid_options(option) {\n    throw new InvalidOptionError(option);\n  }\n\n  parse(args) {\n    var opts = {};\n\n    // Check is acc\n    var save_value = (options, value) => {\n      if (options.type == Boolean && options.acc) {\n        value = opts[options.name] || 0;\n        value = (value === true ? 1 : value) + 1;\n      } else {\n        if (_.isEmpty(value) && options.acc) return;\n\n        if (options.acc) {\n          var actual = opts[options.name] || [];\n          actual.push(value);\n          value = actual;\n        }\n      }\n      opts[options.name] = value;\n    }\n\n    // Set a default values\n    _.each(this.options, (opt) => {\n      if (opt.haveDefault() && !_.has(opts, opt.name)) {\n        opts[opt.name] = opt.default;\n      }\n    });\n\n    var [previous, previous_value] = [null, null];\n    var stackable = _.clone(this.stackable);\n    var stop = false;\n\n    // Process values and save in opts\n    var process = () => {\n      if (previous_value) {\n        // Not have a previos options then it is a stackable option\n        if (!previous) {\n          previous = stackable.shift();\n        }\n\n        if (previous) {\n          try {\n            var value = previous.processValue(previous_value);\n          } catch (err) {\n            if (\n              err instanceof InvalidValueError\n              && stackable.length > 0\n              && !previous.required\n            ) {\n              if (previous.type == Boolean) {\n                save_value(previous, true);\n              }\n              previous = null;\n              return process();\n            }\n            throw err;\n          }\n          save_value(previous, value);\n          stop = previous.stop;\n          previous_value = previous = null;\n        } else {\n          this.invalid_options(previous_value);\n        }\n      }\n    }\n\n    args = this.fix_args(args);\n    while((!stop) && args.length > 0) {\n      var arg = args.shift();\n      if (arg.match(/^-{1,}/)) {\n        arg = arg.replace(/^-*/, '');\n        if (this.options[arg]) {\n          previous = this.options[arg];\n          save_value(previous, (previous.type == Boolean) ? true : previous.default);\n        } else {\n          this.invalid_options(arg);\n        }\n      } else {\n        previous_value = arg;\n      }\n      process();\n    }\n\n    this.valid_requires(opts);\n    opts.__leftover = args;\n    return opts;\n  }\n\n  valid_requires(opts) {\n    var filter = (opt) => { return opt.required };\n    var requireds = _.filter(this.options, filter);\n    requireds = requireds.concat(_.filter(this.stackable, filter));\n\n    _.each(requireds, (option) => {\n      if (!opts[option.name])\n        throw new RequiredOptionError(option.name);\n    })\n  }\n\n  before_action(...args) {\n    return this.action(...args);\n  }\n\n  run(args = [], opts = null) {\n    return this.before_action(this.parse(args), opts);\n  }\n\n  action() {\n    throw new Error(\"Don't use Command directly, implemente the action.\");\n  }\n\n  tKeyPath(...keys) {\n    return ['commands', this.name, ...keys];\n  }\n\n  showUsage(prefix = null) {\n    this.__show_usage(prefix);\n    this.__show_description();\n    this.__show_options();\n    this.__show_stackables();\n    this.__show_examples();\n    this.output();\n  }\n\n  usageLine(replace = null) {\n    var usage = [this.name];\n\n    if (_.keys(this.options).length > 0) {\n      usage.push('[options]');\n    }\n\n    _.each(this.stackable, (option) => {\n      if (replace == option.name) {\n        usage.push(\"%s\");\n      } else {\n        var r    = option.required;\n        var stop = option.stop ? '*' : '';\n        usage.push((r ? '{' : '[') + stop + option.name + (r ? '}' : ']'));\n      }\n    });\n\n    return usage.join(\" \");\n  }\n\n  __show_examples() {\n    if (!_.isEmpty(this.examples)) {\n      this.output();\n      this.tOutput(\"commands.help.examples\");\n      this.output();\n      _.each(this.examples, (example) => {\n        this.output(`  ${example}`);\n      });\n    }\n  }\n\n  __show_usage(prefix) {\n    var usage = this.usageLine();\n\n    if (prefix)\n      usage = printf(prefix, usage);\n\n    this.tOutput(\"commands.help.usage\", usage);\n  }\n\n  __show_description() {\n    this.output();\n    this.tOutput(this.tKeyPath(\"description\"));\n  }\n\n  __show_options() {\n    if (_.keys(this.options).length > 0) {\n      this.output();\n      this.tOutput(\"commands.help.options\");\n      this.output();\n      var rows = [];\n      _.each(this.options, (opt, key) => {\n        // Skip alias\n        if (key == opt.name) {\n          rows.push(opt.help(t(this.tKeyPath(\"options\", opt.name))));\n        }\n      });\n      this.outputWithLabel(rows, '  ');\n    }\n  }\n\n  __show_stackables() {\n    _.each(this.stackable, (opt) => {\n      if (opt.options && opt.options.length > 0) {\n        var tKey = this.tKeyPath(\"options\", opt.name);\n        this.output();\n        this.output(\"%s:\", t([...tKey, \"name\"]) || opt.name);\n        this.output();\n        this.outputWithLabel(opt.helpValues([...tKey, \"options\"]), '  ');\n      }\n    });\n  }\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","$traceurRuntime.toObject($__placeholder__0)","$traceurRuntime.spread($__placeholder__0)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}