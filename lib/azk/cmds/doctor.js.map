{"version":3,"file":"doctor.js","sources":["../../../src/cmds/doctor.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { _, async, config } from 'azk';\nimport { Command } from 'azk/cli/command';\nimport { Client } from 'azk/agent/client';\nimport Azk from 'azk';\nimport docker from 'azk/docker';\n\nclass Cmd extends Command {\n  action(opts) {\n    return async(this, function* () {\n      // Get agent status\n      var agent = yield Client.status();\n      var require_vm = config(\"agent:requires_vm\");\n\n      // Mount data to render\n      var data = {\n        version: Azk.version,\n        docker: require_vm && !agent.agent ? { Version: \"down\".red } : yield docker.version(),\n        use_vm: require_vm ? \"yes\".green : \"no\".yellow,\n        agent_running: agent.agent ? \"up\".green : \"down\".red,\n      };\n\n      var render = opts.logo ? this.render_with_logo : this.render_normal;\n      this.output(render.apply(this, [data]));\n    });\n  }\n\n  render_with_logo(data) {\n    var data_string = this.render_normal(data);\n    data_string = data_string.split(\"\\n\");\n\n    return `\n               ${\"##########\".blue}\n           ${\"##################\".blue}\n         ${\"######################\".blue}\n        ${\"########################\".blue}      ${data_string[1]}\n       ${\"#################  #######\".blue}     ${data_string[2]}\n      ${\"##################  ########\".blue}    ${data_string[3]}\n     ${\"####     ##       #  ###  ####\".blue}   ${data_string[4]}\n     ${\"########  ####   ##  #  ######\".blue}\n     ${\"###  ###  ##   ####  ##  #####\".blue}\n      ${\"##    #  #       #  ###  ###\".blue}\n       ${\"##########################\".blue}\n        ${\"########################\".blue}\n         ${\"######################\".blue}\n            ${\"################\".blue}\n               ${\"##########\".blue}\n    `;\n  }\n\n  render_normal(data) {\n    return `\n      ${\"Azk\".cyan}   : ${data.version.blue}\n      ${\"Agent\".cyan} : ${data.agent_running}\n      ${\"Docker\".cyan}: ${data.docker.Version}\n      ${\"Use vm\".cyan}: ${data.use_vm}\n    `;\n  }\n}\n\nexport function init(cli) {\n  (new Cmd('doctor', cli))\n    .addOption(['--logo'], { default: false });\n}\n\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","return $ctx.end()","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}