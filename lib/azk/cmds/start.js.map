{"version":3,"file":"start.js","sources":["../../../src/cmds/start.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["import { log, _, async, config, t } from 'azk';\nimport { Command, Helpers } from 'azk/cli/command';\nimport { Manifest } from 'azk/manifest';\nimport { SYSTEMS_CODE_ERROR, NotBeenImplementedError } from 'azk/utils/errors';\n\nclass Cmd extends Command {\n  action(opts) {\n    return async(this, function* () {\n      yield Helpers.requireAgent();\n\n      var manifest = new Manifest(this.cwd, true);\n      var systems  = [manifest.systemDefault];\n\n      if (opts.system) {\n        if (opts.system == \":all\") {\n          systems = _.map(manifest.systems, (system) => {\n            return system;\n          });\n        } else {\n          var systems_name = opts.system.split(',');\n          systems = _.reduce(systems_name, (systems, name) => {\n            systems.push(manifest.system(name, true));\n            return systems;\n          }, []);\n        }\n      }\n\n      yield this[`${this.name}`](manifest, systems, opts);\n\n      if (_.contains([\"start\", \"stop\", \"scale\"], this.name))\n        yield this.status(manifest, systems);\n    });\n  }\n\n  _scale(system, instances) {\n    var progress = (event) => {\n      var pull_progress = Helpers.newPullProgress(this);\n      if (event.type == \"pull_msg\") {\n        pull_progress(event);\n      } else {\n        var keys = [\"commands\", \"scale\"];\n        switch(event.type) {\n          case \"action\":\n            var data = { image: system.image.name };\n            this.tOutput([...keys, event.action], data);\n            break;\n          case \"scale\":\n            //keys.push((event.from > event.to) ? \"starting\" : \"stopping\");\n            this.tOutput([...keys, \"scale\"], event);\n            break;\n          default:\n            log.debug(event);\n        }\n      }\n    }\n    return system.provision({ pull: true }).then(() => {\n      return system.scale(instances, this.stdout(), true);\n    }).progress(progress);\n  }\n\n  start(manifest, systems) {\n    return async(this, function* () {\n      for (var i = 0; i < systems.length; i++) {\n        var system = systems[i];\n        var containers = yield system.instances();\n        if (containers.length > 0) {\n          this.fail('commands.start.already', system);\n          return SYSTEMS_CODE_ERROR;\n        }\n        yield this._scale(system, 1);\n      }\n    });\n  }\n\n  scale(manifest, systems, opts) {\n    return async(this, function* () {\n      for (var i = 0; i < systems.length; i++) {\n        var system = systems[i];\n        yield this._scale(system, opts.instances);\n      }\n    })\n  }\n\n  stop(manifest, systems, opts) {\n    return async(this, function* () {\n      for (var i = 0; i < systems.length; i++) {\n        var system = systems[i];\n        var containers = yield system.instances();\n        if (containers.length <= 0) {\n          this.fail('commands.stop.not_running', system);\n        } else {\n          yield this._scale(system, 0);\n\n        }\n      }\n    });\n  }\n\n  _hosts(system, instances) {\n    if (instances.length >= 1) {\n      var hosts = system.hosts;\n      if (hosts.length == 0) {\n        var instance = instances[0];\n        hosts = ['azk-agent:' + instance.Ports[0].PublicPort];\n      }\n      return hosts.join(', ');\n    }\n    return \"\";\n  }\n\n  status(manifest, systems, opts = {}) {\n    var columns = ['System'.blue, 'Instances'.yellow, 'Hosts'.green];\n    var table_status = this.table_add('table_status', { head: columns });\n\n    // Instances columns\n    columns = ['Up Time'.green, 'Command'.cyan];\n    if (opts.all) columns.unshift('Status'.red);\n    columns.unshift('Azk id'.blue);\n\n    return async(this, function* () {\n      for (var system of systems) {\n        var instances = yield system.instances(opts.all);\n\n        if (opts.instances) {\n          instances = _.sortBy(instances, function(container) {\n            return container.Created * -1;\n          });\n\n          var rows = _.map(instances, function(container) {\n            var names = container.Names[0].split('.');\n            var row   = [ container.Status, container.Command ];\n\n            if (opts.all) {\n              row.unshift(container.Status.match(/^Exit/) ? 'dead'.red : 'runnig'.green);\n            }\n            row.unshift(container.Id.slice(0, 12));\n\n            return row;\n          });\n\n          this.output(system.name + \": \" + instances.length + \" instances\");\n          var table_name = 'table_' + system.name;\n          this.table_add(table_name, { head: columns });\n          this.table_push(table_name, ...rows);\n          this.table_show(table_name);\n        } else {\n          var line = [system.name, instances.length, this._hosts(system, instances) || \"-\"];\n          this.table_push(table_status, line);\n        }\n      }\n\n      if (!opts.instances)\n        this.table_show(table_status);\n    });\n  }\n\n  reload(manifest, systems, opts) {\n    throw new NotBeenImplementedError('reload');\n  }\n\n  up(manifest, systems, opts) {\n    throw new NotBeenImplementedError('up');\n  }\n}\n\nexport function init(cli) {\n  (new Cmd('start', cli))\n    .addOption(['--system', '-s'], { type: String });\n\n  // TODO: Add kill\n  (new Cmd('stop', cli))\n    .addOption(['--system', '-s'], { type: String });\n\n  (new Cmd('scale', cli))\n    .addOption(['--system', '-s'], { type: String })\n    .addOption(['--instances', '-i'], { type: Number, default: 1 });\n\n  (new Cmd('status', cli))\n    .addOption(['--system', '-s'], { type: String, default: \":all\" })\n    .addOption(['--instances', '-i'], { default: false })\n    .addOption(['--all', '-a'], { default: false });\n\n  (new Cmd('reload', cli))\n    .addOption(['--system', '-s'], { type: String });\n\n  (new Cmd('up', cli));\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.maybeThrow()","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","return $ctx.end()","$traceurRuntime.spread($__placeholder__0)","$ctx.sent","$ctx.returnValue = $__placeholder__0","\n        for (var $__placeholder__0 =\n                 $__placeholder__1[Symbol.iterator](),\n                 $__placeholder__2;\n             !($__placeholder__3 = $__placeholder__4.next()).done; ) {\n          $__placeholder__5;\n          $__placeholder__6;\n        }","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}