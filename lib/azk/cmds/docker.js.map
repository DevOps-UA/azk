{"version":3,"file":"docker.js","sources":["../../../src/cmds/docker.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"AAAA;ACAI,CAAJ,EAAI,CAAA,YAAY,oBAAoB,CAAC;UCArC,CAAA,OAAO,CFAuC,KAAK,CEAzB;;;;;;UAA1B,CAAA,OAAO,CFC0B,iBAAiB,CEDxB;;;cAA1B,CAAA,OAAO,CFEkB,cAAc,CEFb;ACAtB,CAAJ,EAAI,MHIJ,SAAM,IAAG;AIJT,CAAA,gBAAe,iBAAiB,CAAC,IAAI,CACrB,eAA2B,CAAE,UAAS,CAAC,CAAA;CDDd,AH+BxC,CG/BwC;AEArC,CAAJ,EAAI,WAAqC,CAAA;ACAzC,CAAA,AAAC,eAAe,YAAY,CAAC;CNK3B,IAAI,OAAM,EAAG;CACX,SAAO,CAAA,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC;GACtC;CAED,WAAU,CAAV,UAAW,IAAI;;CACb,SAAO,CAAA,KAAK,WAAE,OAAO,CAAE,CAAA,MAAM;AACvB,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,MAAM,CAAC,sBAAsB,CAAC,CAAA,CAAG,OAAM,CAAC;AAChD,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,WAAW,YAAY,CAAC,QAAQ,CAAE,MAAK,CAAC,CAAC;AACjD,CAAJ,QAAI,CAAA,IAAI,EAAI,CAAA,CAAC,OAAO,CAAC,IAAI,WAAW,YAAG,IAAI,CAAE,CAAA,GAAG,CAAK;AACnD,CAAA,WAAI,KAAK,EAAC,MAAM,EAAA,IAAG,EAAA,OAAK,EAAC,CAAC;CAC1B,aAAO,KAAI,CAAC;OACb,EAAE,GAAE,CAAC,CAAC;AACD,CAAN,QAAM,CAAA,GAAG,IAAG,qBAAqB,EAAA,MAAK,EAAA,YAAY,EAAA,CAAA,IAAI,WAAW,EAAA,IAAI,EAAA,CAAA,IAAI,KAAK,CAAC,GAAG,CAAC,CAAA,CAAA,KAAG,CAAA,CAAC;AAEvF,CAAA,gBAAW,CAAC,GAAG,YAAG,GAAG,CAAK;AACxB,CAAA,cAAO,CAAC,CAAC,GAAG,CAAC,EAAG,CAAA,GAAG,KAAK,EAAG,EAAC,CAAC,CAAC;OAC/B,EAAC,CAAC;OACH,CAAC;GACJ;CAED,OAAM,CAAN,UAAO,IAAI;CACT,SAAO,CAAA,KAAK,CAAC,IAAI,WAAa;;;;CO1BlC,WAAO,CCAP,eAAe,cAAc,ADAL,CEAxB,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;;CCDjB,mBV2BY,CAAA,OAAO,aAAa,EAAE,CU3BV;;ACAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;oBX4BE,CAAA,IAAI,WAAW;oBAAf,UAAe,CAAf,IAAI,CAAY,KAAI,CAAC;;;;;CU5BxC,yBAAwB;;oBEAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,iBAAI,YAAY,OAAoB,CAAA;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CLCmB,MAC/B,CFAO,KAAI,CAAC,CAAC;MP2BZ,CAAC;GACJ;MA1Be,QAAO,CMHgC;CNgClD,OAAS,KAAI,CAAC,GAAG,CAAE;CACxB,OAAO,EAAC,GAAI,IAAG,CAAC,sBAAsB,CAAE,IAAG,CAAC,CAAC,CAAA;CAC9C;AenCD,CfmCC,KenCK,QAAQ;CCAd,WAAwB;CAAE,eAAyB;GAAE;ACArD,CAAA,WAAU,CAAE,KAAI;CAAA,AFAkB,CAAC;CfqCnC","sourcesContent":["import { _, path, async, defer, config } from 'azk';\nimport { Command, Helpers } from 'azk/cli/command';\nimport { Manifest } from 'azk/manifest';\n\nclass Cmd extends Command {\n  get docker() {\n    return require('azk/docker').default;\n  }\n\n  run_docker(opts) {\n    return defer((resolve, reject) => {\n      var point = config('agent:vm:mount_point') + '.nfs';\n      var _path = this.docker.resolvePath(this.cwd, point);\n      var args  = _.reduce(opts.__leftover, (args, arg) => {\n        args.push(`\\\\\"${arg}\\\\\"`);\n        return args;\n      }, []);\n      var   cmd = `azk vm ssh -t \"cd ${_path}; docker ${opts.dockerargs} ${args.join(\" \")}\"`;\n\n      this.execSh(cmd, (err) => {\n        resolve((err) ? err.code : 0);\n      });\n    });\n  }\n\n  action(opts) {\n    return async(this, function* () {\n      yield Helpers.requireAgent();\n      return yield this.run_docker(opts);\n    });\n  }\n}\n\nexport function init(cli) {\n  return (new Cmd('docker [*dockerargs]', cli))\n}\n\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","return $__placeholder__0(\n            $__placeholder__1,\n            this);","$traceurRuntime.generatorWrap","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.maybeThrow()","$ctx.sent","$ctx.returnValue = $__placeholder__0","return $ctx.end()","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}